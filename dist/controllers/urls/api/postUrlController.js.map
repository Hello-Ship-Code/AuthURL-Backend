{"version":3,"file":"postUrlController.js","sourceRoot":"","sources":["../../../../src/controllers/urls/api/postUrlController.ts"],"names":[],"mappings":";;;;;;AAEA,6FAAqF;AAErF,wFAA+D;AAC/D,iDAA6C;AAEtC,MAAM,iBAAiB,GAAmB,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACxE,IAAI,CAAC;QACH,MAAM,EAAE,WAAW,EAAE,GAAG,iCAAa,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;QACrD,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAA;QAElC,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;QACvB,CAAC;QAED,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;QACxB,CAAC;QAED,MAAM,IAAA,iBAAO,EAAC,WAAW,EAAE,MAAgB,CAAC,CAAA;QAE5C,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;IACvB,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,mBAAS,CAAC,GAAG,KAAK,EAAE,EAAE,GAAG,CAAC,CAAC,CAAA;IACtC,CAAC;AACH,CAAC,CAAA;AAnBY,QAAA,iBAAiB,qBAmB7B","sourcesContent":["import type { RequestHandler } from 'express'\n\nimport { postUrlSchema } from './../../../Validation/urlValidation/urlPostValidation'\n\nimport HttpError from '../../../utils/error-handlers/HttpError'\nimport { postUrl } from '../services/postUrl'\n\nexport const postUrlController: RequestHandler = async (req, res, next) => {\n  try {\n    const { redirectUrl } = postUrlSchema.parse(req.body)\n    const userId = res.locals.user?.id\n\n    if (!redirectUrl) {\n      res.redirect('/user')\n    }\n\n    if (!userId) {\n      res.redirect('/login')\n    }\n\n    await postUrl(redirectUrl, userId as string)\n\n    res.redirect('/user')\n  } catch (error) {\n    next(new HttpError(`${error}`, 404))\n  }\n}\n"]}